# Система размещения предметов на локациях

## Обзор

Система позволяет размещать предметы на локациях, которые игрок может подобрать или осмотреть. Это идеально подходит для создания квестов на сбор предметов.

## Что было реализовано

### 1. Расширение LocationData
Добавлено поле `GroundItems` в класс `LocationData`:
```csharp
public List<InventoryItemData> GroundItems { get; set; } = new();
```

### 2. Загрузка предметов в JsonWorldRepository
Добавлена загрузка предметов на землю при создании локации из данных.

### 3. Расширение JsonEditor
В `EditLocationForm` добавлена новая секция "Предметы на земле" с возможностью:
- Выбирать предметы для размещения на локации
- Указывать количество каждого предмета
- Сохранять изменения в JSON

## Пример использования

### JSON структура локации с предметами

```json
{
  "ID": 3007,
  "Name": "Заброшенная хижина",
  "Description": "Старая хижина в лесу. Здесь можно найти полезные предметы.",
  "GroundItems": [
    {
      "ItemID": 1001,
      "Quantity": 3
    },
    {
      "ItemID": 1101,
      "Quantity": 1
    },
    {
      "ItemID": 1002,
      "Quantity": 2
    }
  ],
  "ScaleMonstersToPlayerLevel": true
}
```

### Как использовать в JsonEditor

1. Откройте JsonEditor
2. Загрузите файл `game_data.json`
3. Перейдите на вкладку "Locations"
4. Дважды кликните на локацию для редактирования
5. В разделе "Предметы на земле":
   - Отметьте галочками предметы, которые должны быть на локации
   - Укажите количество каждого предмета
6. Нажмите "OK" для сохранения

### Игровой процесс

Когда игрок заходит на локацию с предметами:

1. **Отображение**: В описании локации появляется строка "На земле: [предметы]"
2. **Взаимодействие**: При нажатии клавиши взаимодействия предметы отображаются в списке
3. **Действия с предметами**:
   - **Подобрать**: Предмет добавляется в инвентарь игрока и исчезает с локации
   - **Осмотреть**: Показывается описание предмета

### Пример квеста на сбор предметов

```json
{
  "id": 5003,
  "name": "Сбор припасов",
  "description": "Соберите 3 крысиного мяса и 1 ржавый меч из заброшенной хижины",
  "questGiverId": 4001,
  "conditions": [
    {
      "type": "CollectItem",
      "description": "Собрать крысиное мясо",
      "requiredAmount": 3,
      "targetId": 1001,
      "currentProgress": 0,
      "isCompleted": false
    },
    {
      "type": "CollectItem", 
      "description": "Собрать ржавый меч",
      "requiredAmount": 1,
      "targetId": 1101,
      "currentProgress": 0,
      "isCompleted": false
    }
  ],
  "rewards": {
    "experience": 50,
    "gold": 100
  }
}
```

## Технические детали

### Классы и методы

- `Location.GroundItems` - список предметов на локации
- `Location.GetGroundItemsDescription()` - получение описания предметов
- `InteractionScreen.InteractWithItem()` - взаимодействие с предметами
- `JsonWorldRepository.CreateLocationFromData()` - загрузка предметов из JSON

### Совместимость

Система полностью обратно совместима:
- Старые локации без `GroundItems` работают как раньше
- Новые локации с `GroundItems` корректно загружаются и отображаются

## Рекомендации по использованию

1. **Для квестов**: Размещайте предметы на локациях, которые игрок должен посетить
2. **Баланс**: Не размещайте слишком много ценных предметов на одной локации
3. **Логика**: Предметы должны логично находиться в указанном месте
4. **Количество**: Используйте разумные количества предметов (1-5 штук обычно достаточно)

## Возможные расширения

В будущем можно добавить:
- Условное появление предметов (только при выполнении квестов)
- Временные предметы (исчезают через определенное время)
- Скрытые предметы (требуют особых навыков для обнаружения)
- Интерактивные предметы (с которыми можно взаимодействовать, не подбирая)
