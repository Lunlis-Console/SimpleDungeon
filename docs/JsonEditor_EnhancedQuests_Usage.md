# Использование расширенных квестов в JsonEditor

## Как открыть новые формы для создания квестов

### 1. Запуск JsonEditor
1. Откройте проект в Visual Studio или IDE
2. Запустите проект `tools/JsonEditor/JsonEditor`
3. Или скомпилируйте и запустите `JsonEditor.exe`

### 2. Загрузка файла с данными
1. В JsonEditor нажмите **Файл → Открыть**
2. Выберите файл `SimpleDungeon/Data/game_data.json` или создайте новый
3. Если файл не содержит `EnhancedQuests`, они будут добавлены автоматически

### 3. Работа с расширенными квестами

#### Создание нового квеста:
1. В меню **Данные** найдите раздел **EnhancedQuests**
2. Нажмите **Добавить EnhancedQuests**
3. Откроется форма **"Редактирование расширенного квеста"**

#### Редактирование существующего квеста:
1. В таблице **EnhancedQuests** выберите квест
2. Дважды кликните по строке или нажмите **Редактировать выбранный в EnhancedQuests**
3. Откроется форма редактирования

### 4. Заполнение формы квеста

#### Вкладка "Основное":
- **ID**: Уникальный идентификатор квеста
- **Название**: Название квеста
- **Описание**: Краткое описание
- **Подробное описание**: Детальное описание
- **Квестодатель**: Выберите NPC, который выдает квест

#### Вкладка "Условия":
- **Добавить условие**: Создать новое условие квеста
- **Редактировать**: Изменить выбранное условие
- **Удалить**: Удалить условие

**Типы условий:**
- **Собрать предметы**: Требует собрать определенное количество предметов
- **Убить монстров**: Требует убить определенное количество монстров
- **Посетить локацию**: Требует посетить определенную локацию
- **Поговорить с NPC**: Требует поговорить с определенным NPC
- **Достичь уровня**: Требует достичь определенного уровня

#### Вкладка "Награды":
- **Награда (золото)**: Количество золота за выполнение
- **Награда (опыт)**: Количество опыта за выполнение
- **Предметы-награды**: Добавить предметы в качестве награды

#### Вкладка "Диалоги":
- **Узел предложения квеста**: ID узла диалога для предложения квеста
- **Узел квеста в процессе**: ID узла диалога для квеста в процессе
- **Узел готовности к завершению**: ID узла диалога для готового квеста
- **Узел завершенного квеста**: ID узла диалога для завершенного квеста

#### Вкладка "Предварительные условия":
- **Добавить условие**: Добавить зависимость от другого квеста
- **Удалить**: Удалить предварительное условие

### 5. Сохранение
1. Нажмите **OK** в форме редактирования квеста
2. В главном окне нажмите **Файл → Сохранить**
3. Квест будет сохранен в файл данных

## Пример создания квеста

### Квест "Охота на крыс"
1. **Основное**:
   - ID: 1
   - Название: "Охота на крыс"
   - Описание: "Убей 5 крыс в подвале"
   - Квестодатель: Торговец (ID: 1)

2. **Условия**:
   - Тип: "Убить монстров"
   - Описание: "Убить крыс"
   - Требуемое количество: 5
   - Целевой монстр: Крыса (ID: 1)

3. **Награды**:
   - Опыт: 100
   - Золото: 50

4. **Диалоги**:
   - Узел предложения: "quest_rats_offer"
   - Узел в процессе: "quest_rats_progress"
   - Узел готовности: "quest_rats_complete"
   - Узел завершения: "quest_rats_done"

## Интеграция с игрой

После создания квестов в JsonEditor:

1. **Загрузка в игру**: Квесты автоматически загружаются из `game_data.json`
2. **Диалоги**: Создайте соответствующие диалоги с указанными ID узлов
3. **Тестирование**: Запустите игру и проверьте работу квестов

## Устранение проблем

### Форма не открывается:
- Убедитесь, что проект скомпилирован без ошибок
- Проверьте, что все необходимые файлы присутствуют

### Ошибки при сохранении:
- Убедитесь, что все обязательные поля заполнены
- Проверьте, что ID квеста уникален
- Убедитесь, что выбранный квестодатель существует

### Квесты не загружаются в игре:
- Проверьте, что файл `game_data.json` содержит раздел `EnhancedQuests`
- Убедитесь, что QuestManager правильно инициализирован в GameServices

## Дополнительные возможности

- **Копирование квестов**: Создайте похожий квест, скопировав существующий
- **Массовое редактирование**: Используйте PropertyGrid для быстрого редактирования простых свойств
- **Экспорт/Импорт**: Сохраняйте квесты в отдельные файлы для обмена

Система готова к использованию! Создавайте интересные и сложные квесты для вашей игры.
