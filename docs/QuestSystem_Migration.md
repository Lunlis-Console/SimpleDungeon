# –ú–∏–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–≤–µ—Å—Ç–æ–≤

## –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### ‚úÖ **–£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤**

#### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `Engine/Quests/Quest.cs` - —Å—Ç–∞—Ä—ã–π –∫–ª–∞—Å—Å –∫–≤–µ—Å—Ç–∞
- `Engine/Quests/QuestItem.cs` - —Å—Ç–∞—Ä—ã–π –∫–ª–∞—Å—Å –ø—Ä–µ–¥–º–µ—Ç–∞ –∫–≤–µ—Å—Ç–∞  
- `Engine/Quests/CollectibleQuest.cs` - —Å—Ç–∞—Ä—ã–π –∫–ª–∞—Å—Å –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ –∫–≤–µ—Å—Ç–∞
- `tools/JsonEditor/JsonEditor/EditQuestForm.cs` - —Å—Ç–∞—Ä–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤

#### –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏–∑ GameData.cs:
- `QuestData` - —Å—Ç–∞—Ä—ã–π –∫–ª–∞—Å—Å –¥–∞–Ω–Ω—ã—Ö –∫–≤–µ—Å—Ç–∞
- `QuestItemData` - —Å—Ç–∞—Ä—ã–π –∫–ª–∞—Å—Å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–∞ –∫–≤–µ—Å—Ç–∞

### ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤**

#### QuestLog.cs:
- –£–±—Ä–∞–Ω—ã —Å—Ç–∞—Ä—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ `ActiveQuests` –∏ `CompletedQuests` —Ç–∏–ø–∞ `Quest`
- –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è `EnhancedQuest`
- –£–ø—Ä–æ—â–µ–Ω—ã –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å –∫–≤–µ—Å—Ç–∞–º–∏

#### GameData.cs:
- –ü–æ–ª–µ `Quests` —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç `List<EnhancedQuest>` –≤–º–µ—Å—Ç–æ `List<QuestData>`
- –£–±—Ä–∞–Ω–æ –ø–æ–ª–µ `EnhancedQuests` (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)

#### JsonEditor:
- –£–±—Ä–∞–Ω–∞ —Å—Ç–∞—Ä–∞—è —Ñ–æ—Ä–º–∞ `EditQuestForm`
- –û–±–Ω–æ–≤–ª–µ–Ω `MainForm.cs` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ —Å `EnhancedQuest`
- –í–∫–ª–∞–¥–∫–∞ "Quests" —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### GameServices.cs:
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∫–≤–µ—Å—Ç–æ–≤ –∏–∑ `game_data.json`
- –ö–≤–µ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ø–æ–ª—è `Quests` –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

#### UI:
- `EnhancedQuestLogScreen` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- –£–±—Ä–∞–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–≤–µ—Å—Ç–æ–≤

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

### üéØ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
- –û–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö
- –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- –ü—Ä–æ—â–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏

### üöÄ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ú–µ–Ω—å—à–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏
- –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

### üõ†Ô∏è **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
- –û–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤
- –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–≤–µ—Å—Ç–æ–≤
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ API

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

### 1. **–í JsonEditor:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"Quests"**
- –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å Quests"** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–≤–µ—Å—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –≤–∫–ª–∞–¥–∫–∞–º–∏

### 2. **–í –∫–æ–¥–µ –∏–≥—Ä—ã:**
```csharp
// –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤
var availableQuests = player.QuestLog.AvailableQuests;
var activeQuests = player.QuestLog.ActiveQuests;
var completedQuests = player.QuestLog.CompletedQuests;

// –ù–∞—á–∞–ª–æ –∫–≤–µ—Å—Ç–∞
player.QuestLog.StartQuest(questID);

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
player.QuestLog.CompleteQuest(questID);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
player.QuestLog.UpdateQuestProgress(context);
```

### 3. **–í –¥–∏–∞–ª–æ–≥–∞—Ö:**
```json
{
  "actions": [
    {
      "type": "StartQuest",
      "param": "1"
    }
  ]
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### JSON —Ñ–∞–π–ª (game_data.json):
```json
{
  "Quests": [
    {
      "id": 1,
      "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–≤–µ—Å—Ç–∞",
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
      "detailedDescription": "–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
      "questGiverId": 1,
      "conditions": [...],
      "rewards": {...},
      "prerequisites": [...],
      "dialogueNodes": {...}
    }
  ]
}
```

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### ‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã `quests.json` –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –ö–≤–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `game_data.json` –≤ –ø–æ–ª–µ `Quests`
- –°—Ç–∞—Ä—ã–µ –∫–≤–µ—Å—Ç—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ

### üîÑ **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–≤–µ—Å—Ç–æ–≤:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ JsonEditor
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∫–≤–µ—Å—Ç—ã –≤ —Ä–∞–∑–¥–µ–ª–µ "Quests"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –∫–≤–µ—Å—Ç–æ–≤
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ `game_data.json`

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. **JsonEditor**: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã**: –ö–≤–µ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ game_data.json
3. **–ñ—É—Ä–Ω–∞–ª –∫–≤–µ—Å—Ç–æ–≤**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤
4. **–î–∏–∞–ª–æ–≥–∏**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–≤–µ—Å—Ç–æ–≤ —Å –¥–∏–∞–ª–æ–≥–∞–º–∏ NPC
5. **–ü—Ä–æ–≥—Ä–µ—Å—Å**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∫–≤–µ—Å—Ç–æ–≤ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö

### üß™ **–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:**
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `SimpleDungeon/Data/test_enhanced_quests.json` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –µ–¥–∏–Ω–∞—è, –º–æ—â–Ω–∞—è –∏ –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–≤–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- ‚úÖ –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —É—Å–ª–æ–≤–∏–π –∫–≤–µ—Å—Ç–æ–≤
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–∏–∞–ª–æ–≥–∏
- ‚úÖ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- ‚úÖ –£–¥–æ–±–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é!
